var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var h=a[e];if(b.call(c,h,e,a))return{i:e,v:h}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");jQuery(document).ready(function(){FrontEndEditForm.init()});
var FrontEndEditForm={debug:!1,formSelector:"#FrontEndEditForm_Form",form:null,timer:null,itsAclick:!1,ajaxForOptionsNewRecord:{target:"#FontEndEditorFormOuter",beforeSubmit:function(){},success:function(){FrontEndEditForm.changedData=!1}},ajaxForOptionsExistingRecord:{beforeSubmit:function(){},success:function(){FrontEndEditForm.changedData=!1}},changedData:!1,deleteLinkSelectors:".frontEndRemoveLink",init:function(){"undefined"!==typeof FrontEndEditFormFormSelector&&(FrontEndEditForm.formSelector=
FrontEndEditFormFormSelector);FrontEndEditForm.coreInits();FrontEndEditForm.checkCookies();FrontEndEditForm.dontTabOnAlsoEdit();FrontEndEditForm.initRemoveLink();FrontEndEditForm.checkHowCompleteFormIs();FrontEndEditForm.progressBarListeners();FrontEndEditForm.deleteConfirmation();FrontEndEditForm.ajaxValidation()},coreInits:function(){FrontEndEditForm.formObject=jQuery(FrontEndEditForm.formSelector);FrontEndEditForm.formObject.on("change","input, select, textarea",function(){FrontEndEditForm.debug&&
console.debug("data has changed");FrontEndEditForm.changedData=!0;FrontEndEditForm.checkHowCompleteFormIs()});FrontEndEditForm.formObject.on("click","h3, a",function(){FrontEndEditForm.debug&&console.debug("doing the click");FrontEndEditForm.changedData&&(FrontEndEditForm.changedData=!1,FrontEndEditForm.isNewRecord()||(FrontEndEditForm.debug&&console.debug("saving data now"),FrontEndEditForm.formObject.ajaxSubmit(FrontEndEditForm.ajaxForOptionsExistingRecord)))});FrontEndEditForm.formObject.find("h3").not("doNotSlide").attr("tabIndex",
0).focus(function(a){FrontEndEditForm.itsAclick||jQuery(this).click()}).on("click",function(){FrontEndEditForm.itsAclick=!1;jQuery(this).hasClass("doNotSlide")||(jQuery(this).toggleClass("closed").toggleClass("opened"),jQuery(this).hasClass("closed")?jQuery(this).nextUntil("h3, .CompositeField").removeClass("openedField").addClass("closedField"):(jQuery(this).nextUntil("h3, .CompositeField").removeClass("closedField").addClass("openedField"),FrontEndEditForm.setCookie("current_section_heading_"+FrontEndEditForm.uniquePageID(),
jQuery(this).attr("id")),jQuery("h3.opened").not(this).click()))}).on("mousedown",function(){FrontEndEditForm.itsAclick=!0});FrontEndEditForm.formObject.find("h3").each(function(a,b){0==a?jQuery(b).addClass("opened"):jQuery(b).addClass("opened").click()});FrontEndEditForm.formObject.on("click"," input[type='submit']",function(){var a=FrontEndEditForm.formObject.find("h3").first();jQuery(a).hasClass("closed")&&jQuery(a).click()});FrontEndEditForm.debug&&console.log("=========== form ready to go with ID:"+
this.IDforRecord()+" and classname: "+this.classNameForRecord())},checkCookies:function(){var a="current_section_heading_"+this.uniquePageID();if(a=FrontEndEditForm.getCookie(a))FrontEndEditForm.formObject.find("h3.opened").click(),0<jQuery("h3#"+a).length&&jQuery("h3#"+a).click()},dontTabOnAlsoEdit:function(){jQuery(".modalPopUp").attr("tabIndex",-1)},setCookie:function(a,b){localStorage.setItem(a,b)},getCookie:function(a){return localStorage.getItem(a)},openMySection:function(){if(jQuery(this).is(":visible"))console.debug("visible");
else{console.debug("not visible");var a=jQuery(this).prev("h3:first");jQuery(a).hasClass("closed")&&jQuery(a).click()}},initRemoveLink:function(){jQuery("body").on("click",FrontEndEditForm.deleteLinkSelectors,function(a){a.preventDefault();var b=this;a=jQuery(b).attr("href");jQuery(b).parent().addClass("removingNow").fadeOut();jQuery.get(a,function(){var a=jQuery(b).closest(".frontendextendedhasone").find("select");console.debug(a);jQuery(b).parent().hide();jQuery(b).removeClass("removingNow");a.length&&
(console.debug("test"),a.val(0))});return!1})},checkHowCompleteFormIs:function(a){var b=0,c=0,d=!1;FrontEndEditForm.formObject.find("div.field").each(function(e,k){if(!jQuery(this).hasClass("readonly")){var g=jQuery(k),f=jQuery(k).find("input, textarea, select"),h=f.attr("id"),m=g.prevAll("h3:first").text(),l=g.prevAll("h3:first").attr("id")+"_NeedsCompletion";f.hasClass("checkbox")?(g=g.find("label").text(),f.attr("checked")?(jQuery("#"+h+"NeedsCompletion").remove(),d=!1,c++):d=!0):(g=g.find("label.left").text(),
f=f.val(),"undefined"!=typeof f&&(0<f.length&&"0"!==f&&"0.00"!==f?(jQuery("#"+h+"NeedsCompletion").remove(),d=!1,c++):d=!0));d&&a&&(0==jQuery("#"+l).length&&jQuery("#FieldsToCompleteList").append('<dt id="'+l+'">'+m+"</dt>"),jQuery("#FieldsToCompleteList").append('<dd id="'+h+'NeedsCompletion">'+g+"</dd>"));b++}});var e=Math.round(c/b*100);0==e?jQuery("#ProgressBar").hide():(jQuery("#ProgressBar").show(),jQuery("#CompletionPercentage").animate({width:e+"%"},500))},progressBarListeners:function(){jQuery("#ProgressBar").on("click",
function(){0==jQuery("#FieldsToCompleteList dd").length&&FrontEndEditForm.checkHowCompleteFormIs(!0);jQuery("#FieldsToCompleteList").slideToggle(400,function(){})});jQuery(document).on("click","#FieldsToCompleteList dt",function(){var a=jQuery(this).attr("id").replace("_NeedsCompletion","");jQuery("#"+a).trigger("click")})},deleteConfirmation:function(){jQuery("input[name='action_deleterecord']").on("click",function(a){confirm("Are you sure you want to delete this record?")||a.preventDefault()})},
ajaxValidation:function(){FrontEndEditForm.formObject.on("change blur","div.field.ajax-validation input, div.field.ajax-validation select, div.field.ajax-validation textarea",function(){var a=jQuery(this),b=a.closest("div.field.ajax-validation");if(!1===b.hasClass("under-investigation")){b.addClass("under-investigation");var c=a.val(),d=a.attr("name"),d="/frontendfieldswithajaxvalidation/check/"+(FrontEndEditForm.classNameForRecord()+"/"+FrontEndEditForm.IDforRecord()+"/"+d+"/");2<c.length&&jQuery.get(d,
{val:c},function(c,d,k){b.find("label.error-message").remove();b.removeClass("ajax-validation-error");b.removeClass("under-investigation");"success"!==d?alert("There was an error."):"ok"!==c&&(a.focus(),b.addClass("ajax-validation-error"),b.append('<label class="right error-message">'+c+"</label>"))})}})},_uniquePageID:"",uniquePageID:function(){""===this._uniquePageID&&(this._uniquePageID=this.classNameForRecord()+"_"+this.IDforRecord());return this._uniquePageID},_IDforRecord:0,IDforRecord:function(){0===
this._IDforRecord&&(this._IDforRecord=jQuery("input[name='IDToUse']").attr("value"));return this._IDforRecord},_classNameForRecord:0,classNameForRecord:function(){0===this._classNameForRecord&&(this._classNameForRecord=jQuery("input[name='ClassNameToUse']").attr("value"));return this._classNameForRecord},isNewRecord:function(){return 0===parseInt(this.IDforRecord())?!0:!1}};
